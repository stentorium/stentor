<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [stentor-utils](./stentor-utils.md)

## stentor-utils package

## Classes

|  Class | Description |
|  --- | --- |
|  [Compiler](./stentor-utils.compiler.md) | Compiles the templated response based on the provided request and context with some configurability.<!-- -->You can provide custom macros that can be used to modify the templated response and also additional context that will be used as possible replacements. |
|  [LambdaError](./stentor-utils.lambdaerror.md) | An Error that allows for a status code to be stored. By default the status code is 500. |
|  [StringExpander](./stentor-utils.stringexpander.md) | Expands strings when the pattern {<!-- -->option0\|option1<!-- -->} is found within the string.<!-- -->If either $<!-- -->{<!-- -->VAR<!-- -->} or the alexa-utterances {<!-- -->-\|VAR<!-- -->} is within the string, it preserved and converted to $<!-- -->{<!-- -->} by default. |
|  [StringExpanderProps](./stentor-utils.stringexpanderprops.md) |  |

## Enumerations

|  Enumeration | Description |
|  --- | --- |
|  [GetDurationGroupBy](./stentor-utils.getdurationgroupby.md) |  |
|  [HandledIn](./stentor-utils.handledin.md) |  |
|  [ListDelimiter](./stentor-utils.listdelimiter.md) |  |
|  [StringVariableStyle](./stentor-utils.stringvariablestyle.md) |  |

## Functions

|  Function | Description |
|  --- | --- |
|  [addDurations(durations, format, round)](./stentor-utils.adddurations.md) | Add durations together, combining to the provided format. |
|  [baseUrl(s)](./stentor-utils.baseurl.md) |  |
|  [capitalize(s)](./stentor-utils.capitalize.md) | Capitalizes the word<!-- -->It turns "zero" to "Zero" |
|  [cleanInvalid(outputSpeech)](./stentor-utils.cleaninvalid.md) | Removes any invalid characters for SSML<p> Note: This will need to be beefed up in the future. </p>[https://github.com/mandnyc/ssml-builder/blob/master/index.js\#L257](https://github.com/mandnyc/ssml-builder/blob/master/index.js#L257) |
|  [cleanTags(str)](./stentor-utils.cleantags.md) | Clean HTML and XML tags from a string |
|  [combine(one, two)](./stentor-utils.combine.md) | Combines two arrays, either of which can be undefined. It always returns an array. |
|  [combineRequestSlots(current, incoming)](./stentor-utils.combinerequestslots.md) | Combines two slot maps. |
|  [compare(value1, value2, operator)](./stentor-utils.compare.md) | Compare the first value to the second using the provided operator.<!-- -->If no operator is provided it defaults to "===" |
|  [compileJSONPaths(responseOutput, object, replaceWhenUndefined)](./stentor-utils.compilejsonpaths.md) | Compiles all instances of a template with the provided string by looking up the JSON path within the provided object.<!-- -->For example, when passed "$<!-- -->{<!-- -->greeting<!-- -->} $<!-- -->{<!-- -->foo.name<!-- -->}<!-- -->, how are you?" and { greeting: "Hello", foo: {<!-- -->name: "Bob" }<!-- -->} will be compiled to "Hello Bob, how are you?" |
|  [compileJSONPaths(responseOutput, object, replaceWhenUndefined)](./stentor-utils.compilejsonpaths_1.md) |  |
|  [compileSlotValues(responseOutput, slots, replaceWhenUndefined, macros)](./stentor-utils.compileslotvalues.md) | Compiles a templated response with slot values from the provided slot map.<!-- -->For example, when passed "What date do you want your $<!-- -->{<!-- -->flowers<!-- -->}<!-- -->?" and the slot map contains a slot with name <code>flowers</code> it will replace it with the value.<!-- -->It will handle the different potential value types for slots such as strings, numbers, dates and durations.<!-- -->By default, if the slot value does not exist, the template value is left untouched. |
|  [compileSlotValues(responseOutput, slots, replaceWhenUndefined, macros)](./stentor-utils.compileslotvalues_1.md) |  |
|  [concatSSML(one, two, delimiter)](./stentor-utils.concatssml.md) | Concat SSML in a smart way for TTS or display. |
|  [concatText(one, two, delimiter)](./stentor-utils.concattext.md) | Combine two strings in a smart way for TTS or display. |
|  [containsInvalidResponse(intent)](./stentor-utils.containsinvalidresponse.md) | Checks to see if any of the responses within the handler has invalid XML within the SSML fields. |
|  [containsNumbers(word)](./stentor-utils.containsnumbers.md) | Does the provided string contain numbers. |
|  [containsUppercase(word)](./stentor-utils.containsuppercase.md) | Does the provided string contain uppercase letters. |
|  [dateTimeRangeToSpeech(value, type)](./stentor-utils.datetimerangetospeech.md) | Converts a date time range to speech to be added to a response.<!-- -->In the case where the date is the same for the start and the end, the date will only be mentioned once. For example "on July 4th 2019 from 1:00 PM to 2:00PM" |
|  [dateTimeToSpeech(value, type)](./stentor-utils.datetimetospeech.md) | <b><i>(BETA)</i></b> Converts a date time object to a string that can be used in either SSML or display text. |
|  [dateTimeToString(dateTime)](./stentor-utils.datetimetostring.md) | Converts a date time object to a string.<!-- -->Either a single date (2020-07-19T23:59:59) or a range (2019-07-19T00:00:00 --<!-- -->&gt; 2020-07-19T23:59:59). |
|  [dedupe(input)](./stentor-utils.dedupe.md) | Removes any duplicates from an array.<!-- -->This is a wrapper around lodash.uniq. |
|  [describeKey(key)](./stentor-utils.describekey.md) | Describes the key in terms of what type of IDs it accepts. |
|  [dessmlify(str)](./stentor-utils.dessmlify.md) | Removes tags <speak> &amp; </speak> from SSML |
|  [determineIntentIdToPath(handler, pathId)](./stentor-utils.determineintentidtopath.md) | For the given handler, find the intentId that will lead to the provided path. |
|  [durationFormatGreaterThan(one, two)](./stentor-utils.durationformatgreaterthan.md) | Compare two duration formats [DurationFormat](./stentor-models.durationformat.md) is greater than the other.<!-- -->For example, a year is greater than a month. |
|  [durationToSpeech(duration, type)](./stentor-utils.durationtospeech.md) | Converts a duration to speech with appropriate pluralization. |
|  [estimateSize(json)](./stentor-utils.estimatesize.md) | Estimate the size of the object for DynamoDB |
|  [existsAndNotEmpty(items)](./stentor-utils.existsandnotempty.md) | Quick function to see if the array exists and has a length greater than 0.<!-- -->You would use this instead of writing <code>myArray &amp;&amp; myArray.length &gt; 0</code>, which increases your cyclomatic complexity. |
|  [fetchUrl(url)](./stentor-utils.fetchurl.md) | Fetch content from url (network or file) |
|  [filterOutIntents(handlersAndIntents)](./stentor-utils.filteroutintents.md) | Filters out the intents from an array of intents and handlers. |
|  [findValueForKey(key, obj)](./stentor-utils.findvalueforkey.md) | Searches the provided object for the provided key.<!-- -->Smarter than a normal obj\[key\] as key can also be a regex.<!-- -->In the cases where a regex is broad (".\*") but there is also an exact match, the exact match is preferred. |
|  [findValuesForKey(key, obj)](./stentor-utils.findvaluesforkey.md) | Finds all values that match for the provided key.<!-- -->Smarter than a normal obj\[key\] as key can also be a regex. |
|  [formatNumberForDisplay(number, format)](./stentor-utils.formatnumberfordisplay.md) | Format numbers for display. This is a thin wrapper around http://numeraljs.com/<!-- -->Default format is "0,0" which turns 1000 to 1,000. More formats can be found [http://numeraljs.com/\#format](http://numeraljs.com/#format) |
|  [forwardsTo(intent, intentId)](./stentor-utils.forwardsto.md) | Does the provided intent or handler forward to the provided ID. |
|  [generateIntentId(name)](./stentor-utils.generateintentid.md) | Generates an ID for an Intent.<!-- -->It follows our Intent ID convention that does not have spaces and ends with <code>Intent</code>. |
|  [generateKey(description)](./stentor-utils.generatekey.md) | Generate a key from the provided key description. |
|  [getDateTimeFrom(date, includeOnly)](./stentor-utils.getdatetimefrom.md) | From a Dialogflow style ISO-8601 time string: "2019-06-05T12:00:00-04:00", it pulls out the date and the time. |
|  [getDateTimeRangeFrom(date)](./stentor-utils.getdatetimerangefrom.md) | Parses the string and returns a DateTimeRange object.<!-- -->Supports both the ISO-8601 range &amp; "--<!-- -->&gt;<!-- -->" style date range. |
|  [getDurationFrom(iso8601Duration, groupBy)](./stentor-utils.getdurationfrom.md) | Parses the string, if in the ISO-8601 duration format, and returns a [Duration](./stentor-models.duration.md) object. If the provided string is not a duration string, it returns undefined.[https://stackoverflow.com/a/29153059/1349766](https://stackoverflow.com/a/29153059/1349766) |
|  [getJSONPath(path, json)](./stentor-utils.getjsonpath.md) | Simple wrapper around JSONPath Plus |
|  [getSlotValue(slots, name)](./stentor-utils.getslotvalue.md) | Returns the slot value, if not found it returns undefined. |
|  [handles(intent, id, how)](./stentor-utils.handles.md) | Does the provided Intent / Handler handle the provided ID in some way or another.<!-- -->This checks redirect, content, &amp; forward for the ID as a key.<!-- -->Optionally, you can specify if you only want to check either redirect, content, or forward. The default is to check all three. |
|  [hasContent(intent)](./stentor-utils.hascontent.md) | Does the provided intent or handler have content. |
|  [hasForwards(intent)](./stentor-utils.hasforwards.md) | Does the provided intent or handler have any forward paths setup. |
|  [hashCode(str)](./stentor-utils.hashcode.md) | Simple function to convert a string to a simple numeric hash.<!-- -->This has potential collisions, do not use as a unique key when the population is large. |
|  [hasMarkup(speech)](./stentor-utils.hasmarkup.md) |  |
|  [hasReprompt(intent)](./stentor-utils.hasreprompt.md) | Does the provided intent or handler have any reprompts. |
|  [hasUtterances(intent)](./stentor-utils.hasutterances.md) | Does the provided intent or handler have utterances. |
|  [isComparable(potential)](./stentor-utils.iscomparable.md) | Is the value comparable with the compare function. |
|  [isDateTime(slotValue)](./stentor-utils.isdatetime.md) | Determine if the request slot value is a DateTime |
|  [isDateTimeRange(slotValue)](./stentor-utils.isdatetimerange.md) | Determine if the request slot value is a DateTimeRange |
|  [isDateTimeRangeString(potential)](./stentor-utils.isdatetimerangestring.md) | Is the string in the date time range format with two ISO-8601 strings separated by "--<!-- -->&gt;<!-- -->" |
|  [isDefiniteArticle(word)](./stentor-utils.isdefinitearticle.md) | Is the word the definite article "the" |
|  [isDuration(slotValue)](./stentor-utils.isduration.md) | Determine if the request slot value is a Duration |
|  [isIndefiniteArticle(word)](./stentor-utils.isindefinitearticle.md) | Is the word the indefinite article "a" or "an" |
|  [isISO8601(potential)](./stentor-utils.isiso8601.md) | Determines if the string is an ISO-8601 style string. |
|  [isISO8601Duration(potential)](./stentor-utils.isiso8601duration.md) | Determine if the string is a proper ISO-8601 duration format.[https://stackoverflow.com/questions/32044846/regex-for-iso-8601-durations](https://stackoverflow.com/questions/32044846/regex-for-iso-8601-durations) [https://en.wikipedia.org/wiki/ISO\_8601\#Durations](https://en.wikipedia.org/wiki/ISO_8601#Durations) |
|  [isISO8601Range(potential)](./stentor-utils.isiso8601range.md) | Determines if the string is an ISO-8601 range style string.<!-- -->This does not cover the entire 8601 spec, just a version that is commonly used by NLUs to communicate date &amp; time.[isISO8601()](./stentor-utils.isiso8601.md) [https://en.wikipedia.org/wiki/ISO\_8601\#Time\_intervals](https://en.wikipedia.org/wiki/ISO_8601#Time_intervals) |
|  [isLambdaError(error)](./stentor-utils.islambdaerror.md) | Is the Error a LambdaError, which has a statusCode. |
|  [isNumeric(num)](./stentor-utils.isnumeric.md) | Check to see if the provided parameter is a number.<!-- -->"2" or 2 will return true.<!-- -->Source [https://stackoverflow.com/a/42356340/1349766](https://stackoverflow.com/a/42356340/1349766) |
|  [isPreposition(word)](./stentor-utils.ispreposition.md) | Is the word an english preposition.<!-- -->NOTE: The list it checks against is not exhaustive. |
|  [isUrl(s)](./stentor-utils.isurl.md) | Simple check to see if the string is potentially a URL.<!-- -->Only looks for a prefix of https://, http:// &amp; file:// |
|  [isValidSSML(response)](./stentor-utils.isvalidssml.md) | Checks to see if the SSML is valid. |
|  [linkify(text, format)](./stentor-utils.linkify.md) | Searches for URLs in a text and converts them to hyperlinks, either for HTML or markdown (default)<!-- -->Based on [https://stackoverflow.com/a/25821576/1349766](https://stackoverflow.com/a/25821576/1349766) |
|  [listisize(items, preferredDelimiter)](./stentor-utils.listisize.md) | Builds a speakable and readable list from a set of items.<!-- -->For example, \["one", "two", "three", "four"\] will be transformed to "one, two, three or four". |
|  [maskEmail(email)](./stentor-utils.maskemail.md) | Partially masks a single email |
|  [maskEmails(s, partial)](./stentor-utils.maskemails.md) | Masks emails within a given string. |
|  [maskNumber(phoneNumber)](./stentor-utils.masknumber.md) | Takes a string with a phone number, sanitizes and masks it while leaving the last four digits legible.<!-- -->For example: 888-8888 -<!-- -->&gt; XXX-8888 (704) 444 1234 -<!-- -->&gt; XXX-XXX-1234 |
|  [maskPhoneNumbers(str, partial)](./stentor-utils.maskphonenumbers.md) | Detects the phone numbers within a string and masks the numbers with \#s, preserving the formatting. |
|  [matchRequestSlotToSlotTypeValue(slot, slotTypeValues)](./stentor-utils.matchrequestslottoslottypevalue.md) | Match the request slot to the provided slot type values.<!-- -->Both synonym and value are used, whichever has the highest score is returned. |
|  [matchUtteranceToSlotTypeValue(utterance, slotTypeValues)](./stentor-utils.matchutterancetoslottypevalue.md) | Matches the utterance to the slot type. |
|  [md5\_2(input)](./stentor-utils.md5_2.md) | Returns an md5 hash for the provided string.<!-- -->Leverages the blueimp-md5 package |
|  [numberToWord(num)](./stentor-utils.numbertoword.md) | Converts number to their word (en) equivalent. For example, 1 is converted to one and 55 if converted to fifty-five |
|  [objHasAttrs(obj)](./stentor-utils.objhasattrs.md) | A utility function to determine if an object has attributes or not. |
|  [parseDate(parsable, returnOnly)](./stentor-utils.parsedate.md) | Parses the date within the string. Returns undefined if it cannot parse one.<!-- -->It does not handle date periods such as "last week" or "last month".<!-- -->Note: This is a wrapper around chrono-node parseDate. See https://github.com/wanasit/chrono for more information. |
|  [parseRelativeDate(relative, now)](./stentor-utils.parserelativedate.md) | Parses the relative date string and returns a date time.<!-- -->Support is currently limited, see possible RelativeDateType &amp; RelativeDateRangeType for current supported values. |
|  [percentComplete(template, required)](./stentor-utils.percentcomplete.md) | Calculates the percentage complete of the required parameters for the given template. |
|  [percentComplete(template, required, returnRemaining)](./stentor-utils.percentcomplete_1.md) |  |
|  [pruneEmpty(obj)](./stentor-utils.pruneempty.md) | Prune an object. Removes all empty strings, NaNs, undefineds, and nulls. |
|  [random(items)](./stentor-utils.random.md) | Returns a random item from the given array. |
|  [randomString(size)](./stentor-utils.randomstring.md) | Generates a random string of characters both upper and lowercase with numbers. |
|  [removeEmptyStrings(obj)](./stentor-utils.removeemptystrings.md) | Creates a copy and removes the empty strings from the object. |
|  [removeItems(obj, attrs)](./stentor-utils.removeitems.md) | A function that's the opposite of "subset" in which it will remove the attributes that are given in the function.<!-- -->The original object is not affected. |
|  [removePostFix(original, postFix)](./stentor-utils.removepostfix.md) | Removes a postfix from a string if it exists. If the postfix does not exist then the string is passed through unedited.<!-- -->For example, when passed "foo" and post fix "\_bar", "foo" will be returned. If you pass "foo\_bar" and "\_bar" then "\_bar" will be removed and "foo" will be returned. |
|  [removeTagsWithContent(speech, tags)](./stentor-utils.removetagswithcontent.md) | Removes the provided XML tags from the provided speech. |
|  [requestSlotValueToString(value)](./stentor-utils.requestslotvaluetostring.md) | Convert a request slot value to a string, helpful for display or debugging. |
|  [responsesContain(intent, character)](./stentor-utils.responsescontain.md) | Does the provided intent or handler have a response that contains the provided character. |
|  [sanitizePhoneNumber(phoneNumber)](./stentor-utils.sanitizephonenumber.md) | Sanitizes a phone number for text to speech. |
|  [shuffle(array)](./stentor-utils.shuffle.md) | Shuffles the contents of an array, returning a new array. |
|  [slot(slots, name)](./stentor-utils.slot.md) | From the provided slot map, it returns the slot value as a string or an empty string if it doesn't find the value. |
|  [slotValueToSpeech(value, type)](./stentor-utils.slotvaluetospeech.md) | Based on the provided slot value, it will return the appropriate <say-as> tag.[https://cloud.google.com/text-to-speech/docs/ssml\#say%E2%80%91as](https://cloud.google.com/text-to-speech/docs/ssml#say%E2%80%91as) [https://developer.amazon.com/en-US/docs/alexa/custom-skills/speech-synthesis-markup-language-ssml-reference.html\#say-as](https://developer.amazon.com/en-US/docs/alexa/custom-skills/speech-synthesis-markup-language-ssml-reference.html#say-as) [https://docs.aws.amazon.com/polly/latest/dg/supportedtags.html\#say-as-tag](https://docs.aws.amazon.com/polly/latest/dg/supportedtags.html#say-as-tag) |
|  [ssmlify(str, clean)](./stentor-utils.ssmlify.md) | Ensures the speech is properly wrapped by <speak> tags. The method is innocuous if they already exist |
|  [subset(obj, attrs)](./stentor-utils.subset.md) | A function that will return a subset of a given object keeping only the attributes that it contains.<!-- -->The original object is not affected. |
|  [throwIfContainsExtra(obj, restrictAttrs, undefinedPermitted, onError)](./stentor-utils.throwifcontainsextra.md) | A validation function that can check an object contains properties that should not exist in the object. |
|  [throwIfDoesContain(obj, bannedAttrs, onError)](./stentor-utils.throwifdoescontain.md) | A validation function that can check if an object contains an attribute that is should not have. |
|  [throwIfDoesNotContain(obj, requiredAttrs, undefinedPermitted, onError)](./stentor-utils.throwifdoesnotcontain.md) | A validation function that can check if an object contains the required attributes and throws an error if they are not part of it. |
|  [toHTML(input, props)](./stentor-utils.tohtml.md) | Converts a markdown string to HTML.<!-- -->Supported markdown is Github<!-- -->It also decodes HTML entities and cleans dirty dangerous tags.<!-- -->All <a> hyperlink tags have <code>target=&quot;_blank&quot;</code> added to open the URLs in a new window. |
|  [toMap(intents)](./stentor-utils.tomap.md) | Quickly turn an array of Intents and Handlers to a map with the intentIds as the keys. |
|  [toNumber(stringOrNumber)](./stentor-utils.tonumber.md) | Converts the string to a number, if applicable. |
|  [toNumberIfPossible(potentialNumber)](./stentor-utils.tonumberifpossible.md) | Converts to a number if possible otherwise it passes it through.<!-- -->This preserves Dates and booleans. If true is passed in, true is passed out. Additionally, if an empty string is passed, it passes it through instead of turning it into a number. |
|  [toResponseOutput(input)](./stentor-utils.toresponseoutput.md) | Ensures that an outputSpeech or reprompt, either string or ResponseOutput, is a ResponseOutput. |
|  [toWords(sentence)](./stentor-utils.towords.md) | From the provided sentence you return just the words in an array.<!-- -->All commas and other punctuation marks will be removed. |
|  [trim(strings, filter)](./stentor-utils.trim.md) | Trims all the strings in a string array. |
|  [truncate(text, maxLength)](./stentor-utils.truncate.md) | A sentence aware string truncation. |
|  [uniq(input)](./stentor-utils.uniq.md) | Removes any duplicates from an array.<!-- -->This is a wrapper around lodash.uniq |
|  [uuid()](./stentor-utils.uuid.md) | Generate a quick, but not perfect, UUID |
|  [wordToNumber(word)](./stentor-utils.wordtonumber.md) | Converts a word like "one hundred" to the number 100.<!-- -->Words that are not numbers are passed through. |

## Interfaces

|  Interface | Description |
|  --- | --- |
|  [CompilerProps](./stentor-utils.compilerprops.md) |  |
|  [ContainsInvalidResponseResult](./stentor-utils.containsinvalidresponseresult.md) |  |
|  [HandlerMap](./stentor-utils.handlermap.md) |  |
|  [IntentMap](./stentor-utils.intentmap.md) |  |
|  [KeyDescription](./stentor-utils.keydescription.md) | A description of a key for either Content, Forwards, or Redirects |
|  [MacroMap](./stentor-utils.macromap.md) |  |
|  [MatchResult](./stentor-utils.matchresult.md) | Results returned by the fuzzy string matcher. |
|  [ObjectWithKeys](./stentor-utils.objectwithkeys.md) |  |
|  [PercentCompleteAndRemaining](./stentor-utils.percentcompleteandremaining.md) |  |

## Variables

|  Variable | Description |
|  --- | --- |
|  [CATCH\_ALL\_REGEX](./stentor-utils.catch_all_regex.md) |  |
|  [DEFAULT\_MARCOS](./stentor-utils.default_marcos.md) |  |
|  [DETECTION\_CATCH\_ALL\_WITH\_EXCLUSION\_REGEX](./stentor-utils.detection_catch_all_with_exclusion_regex.md) |  |
|  [DETECTION\_CATCH\_ALL](./stentor-utils.detection_catch_all.md) |  |
|  [DETECTION\_ID\_ONLY\_REGEX](./stentor-utils.detection_id_only_regex.md) |  |
|  [DETECTION\_INCLUDE\_ONLY\_REGEX](./stentor-utils.detection_include_only_regex.md) |  |
|  [DURATION\_FORMAT\_TO\_MS\_MULTIPLIER](./stentor-utils.duration_format_to_ms_multiplier.md) | Lookup table to convert a duration format to a multiplier that will convert it to milliseconds |
|  [ISO\_8601\_DATE\_ONLY](./stentor-utils.iso_8601_date_only.md) |  |
|  [ISO\_8601\_DURATION](./stentor-utils.iso_8601_duration.md) | Regex to detect ISO-8601 duration strings[https://stackoverflow.com/a/32045167](https://stackoverflow.com/a/32045167) |
|  [ISO\_8601\_RANGE](./stentor-utils.iso_8601_range.md) |  |
|  [ISO\_8601\_TIME\_ONLY](./stentor-utils.iso_8601_time_only.md) |  |
|  [ISO\_8601](./stentor-utils.iso_8601.md) |  |
|  [PREPOSITIONS](./stentor-utils.prepositions.md) |  |

## Type Aliases

|  Type Alias | Description |
|  --- | --- |
|  [Comparable](./stentor-utils.comparable.md) |  |
|  [DurationFormatToMSMultiplier](./stentor-utils.durationformattomsmultiplier.md) |  |
|  [PercentComplete](./stentor-utils.percentcomplete.md) |  |
|  [ResponseMacro](./stentor-utils.responsemacro.md) |  |
|  [ValidateKeyCallback](./stentor-utils.validatekeycallback.md) |  |
|  [ValidationErrorHandler](./stentor-utils.validationerrorhandler.md) |  |

